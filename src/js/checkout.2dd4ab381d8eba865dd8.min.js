var checkout=(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[2],{59:function(e,t){},60:function(e,t){},61:function(e,t){},64:function(e,t,o){"use strict";o.r(t);o(3),o(4),o(5),o(6),o(7),o(59);var a=o(1),s=o(11),r=o.n(s),n=o(0),l=o.n(n);let i=l()(".checkout__form").data("program-id"),c=l()(".promokod__price"),_=l()(".promokod__result"),p=parseInt(_.text()),d={},u=l()(".checkout-form-group__select option");for(let e of u)d[l()(e).val()]=l()(e).data("price");function m(){var e=[];console.log("check_coupone");let t={action:"getDiscontByCount",user_prod_id:l()("[data-program-id]").data("program-id")};return l.a.ajax({type:"POST",url:tikets_ajax.url,data:t,success:function(t){e=JSON.parse(t)},error:function(e,t,o){console.log(e),l()(".partnership__response").text("ОШИБКА!")}}),e}!function(){let e=l()(".checkout-form-group__apply"),t=l()('[name="user-promokod"]'),o=l()("[data-program-id]").data("program-id"),s={action:"checkCoupone",user_promocode:"",user_prod_tariff_id:l()("#user-tariff").find(":selected").val(),user_prod_id:o};e.on("click",function(e){e.preventDefault(),s.user_promocode=l()("#user-promokod").val();let o=s.user_promocode;console.log(o),l.a.ajax({type:"POST",url:tikets_ajax.url,data:s,success:function(e){console.log(e);let o=JSON.parse(e);if(console.log(o),O=(w=o).status,F=w.text,x=w.discount_type,D=w.coupon_amount,0===O){let e=t.parent().parent();return e.addClass("checkout-form-group_error"),void e.find(".checkout-form-group__message").html(F)}{let e=t.parent().parent();return e.addClass("checkout-form-group_green"),void e.find(".checkout-form-group__message").html(F)}},error:function(e,s,r){if(console.log(e),0===o.length){let e=t.parent().parent();return e.addClass("checkout-form-group_error"),void e.find(".checkout-form-group__message").html(a.a.ERROR_EMPTY_PROMOCODE_FIELD)}}})}),t.on("focus",E)}(),m(),l()(".promokod__add").on("click",function(e){e.preventDefault(),p++,_.html(p),y()}),l()(".promokod__minus").on("click",function(e){e.preventDefault(),p>1&&(p--,_.html(p),y())}),l()(".checkout-form-group__select").on("change",function(){y()});var f=m(),h=f.status,v=(f.text,f.disconts);function y(){let e=l()(".checkout-form-group__select").find(":selected").val(),t=d[e];if(1===O)switch(x){case"percent":if(t){let e=p*parseFloat(t),o=e-e*(D/100);c.html(o.toFixed(2)+" ")}break;case"fixed_cart":if(t){let e=p*parseFloat(t)-D;c.html(e.toFixed(2)+" ")}break;case"fixed_product":if(t){let e=p*parseFloat(t)-p*D;c.html(e.toFixed(2)+" ")}}else if(1===h)l.a.each(v,function(){if(p>this.quantity_from&&p<this.quantity_to){let e=p*parseFloat(t)-this.discount;c.html(e.toFixed(2)+" ")}});else{let e=p*parseFloat(t);c.html(e.toFixed(2)+" ")}}let g=l()('[name="user-phone"]'),k=l()('[name="user-name"]'),b=l()('[name="user-email"]'),C=l()('[name="user-comment"]'),R=l()('[name="message"]');function E(){let e=l()(this).parent().parent();e.hasClass("checkout-form-group_error")&&e.removeClass("checkout-form-group_error")}g.on("focus",E),k.on("focus",E),b.on("focus",E),r()({regex:String.raw`^\+375 (17|25|29|33|44) [0-9]{3} [0-9]{2} [0-9]{2}$`}).mask(g[0]),l()(".promokod__button-chekout").on("click",function(e){e.preventDefault();let t=g.val(),o=k.val(),s=b.val(),r=C.val(),n=l()(".checkout-form-group__select").find(":selected").val(),c=R.val();if(0===t.length){let e=g.parent().parent();e.addClass("checkout-form-group_error"),e.find(".checkout-form-group__message").html(a.a.ERROR_REQUIRE_FIELD);let t=e.offset().top-l()(".header").height()-40;return void l()("html, body").animate({scrollTop:t},400)}if(!a.a.phone(t)){let e=g.parent().parent();e.addClass("checkout-form-group_error"),e.find(".checkout-form-group__message").html(a.a.ERROR_PHONE_FORMAT_FIELD);let t=e.offset().top-l()(".header").height()-40;return void l()("html, body").animate({scrollTop:t},400)}if(0===o.length){let e=k.parent().parent();e.addClass("checkout-form-group_error"),e.find(".checkout-form-group__message").html(a.a.ERROR_REQUIRE_FIELD);let t=e.offset().top-l()(".header").height()-40;return void l()("html, body").animate({scrollTop:t},400)}if(0===s.length){let e=b.parent().parent();e.addClass("checkout-form-group_error"),e.find(".checkout-form-group__message").html(a.a.ERROR_REQUIRE_FIELD);let t=e.offset().top-l()(".header").height()-40;return void l()("html, body").animate({scrollTop:t},400)}if(!a.a.email(s)){let e=b.parent().parent();e.addClass("checkout-form-group_error"),e.find(".checkout-form-group__message").html(a.a.ERROR_EMAIL_FIELD);let t=e.offset().top-l()(".header").height()-40;return void l()("html, body").animate({scrollTop:t},400)}_={programId:i,ticketCount:p,tariffId:n,name:o,email:s,message:c,phone:t,comment:r,action:"createOrder"},console.log("send data",_),l.a.ajax(tikets_ajax.url,{data:_,method:"post",dataType:"json",beforeSend:function(){l()(".preloader").addClass("preloader_active")},success:function(e){console.log(e),function(e){let t=document.createElement("form");t.method="POST",console.log("check: "+e.w_t),t.action="https://securesandbox.webpay.by/";for(let o in e){let a=document.createElement("input");a.value=e[o],a.name=o,t.appendChild(a)}document.body.appendChild(t),t.submit()}(e),l()(".preloader").removeClass("preloader_active")},error:function(e){console.log(e),l()(".preloader").removeClass("preloader_active"),alert("Error connection.\n Please try again later.")}});var _});var w=[],O=null,F=null,x=null,D=null;l()("#form2").submit(function(e){e.preventDefault();let t=l()(this).find("[name*='name']").val(),o=l()(this).find("[name*='komp']").val(),s=l()(this).find("[name*='col']").val();if(0===t.length)return console.log("name",a.a.ERROR_EMPTY_FIELD),void l()(this).find("[name*='name']").addClass("input_error");if(l()(this).find("[name*='name']").removeClass("input_error"),0===t.length)return console.log("komp",a.a.ERROR_EMPTY_FIELD),void l()(this).find("[name*='komp']").addClass("input_error");if(l()(this).find("[name*='komp']").removeClass("input_error"),0===t.length)return console.log("col",a.a.ERROR_EMPTY_FIELD),void l()(this).find("[name*='col']").addClass("input_error");l()(this).find("[name*='col']").removeClass("input_error");let r={action:"sendForm",name:t,komp:o,col:s};l.a.ajax({type:"POST",url:kompSendMail.url,data:r,success:function(e){console.log(e);JSON.parse(e);l()("#form2")[0].reset()}})});o(60);l()(".pay-type__options-item-input").on("change",function(){"1"==l()(".pay-type__options-item-input:checked").attr("id")?(l()(".promokod__button-chekout").css("display","block"),l()(".promokod__button-chekout-pay").css("display","none")):(l()(".promokod__button-chekout").css("display","none"),l()(".promokod__button-chekout-pay").css("display","block"))});o(12),o(18),o(61);l()(document).ready(function(){l()(".types__list-tab").removeClass("types__list-tab_active"),l()(".types__list-tab:nth-child(1)").addClass("types__list-tab_active"),l()(".types__content:nth-child(1)").addClass("types__content_active")}),l()(".types__list-tab").on("click",function(e){if(e.preventDefault(),l()(window).width()<740){if(l()(".types__list-tab").slideDown(),l()(".types__wrapper-list").addClass("types__wrapper-list_active"),!l()(this).hasClass("types__list-tab_active")){l()(".types__list-tab").addClass("types__list-tab-js").removeClass("types__list-tab_active"),l()(this).removeClass("types__list-tab-js").addClass("types__list-tab_active").removeAttr("style");let e=l()(this).data("content");l()(".types__content").removeClass("types__content_active"),l()(l()(".types__content")[e]).addClass("types__content_active"),l()(".types__list-tab-js").slideUp(function(){l()(this).removeClass("types__list-tab-js").removeAttr("style")}),l()(".types__wrapper-list").removeClass("types__wrapper-list_active")}}else if(!l()(this).hasClass("types__list-tab_active")){l()(".types__list-tab").removeClass("types__list-tab_active"),l()(this).addClass("types__list-tab_active");let e=l()(this).data("content");l()(".types__content").removeClass("types__content_active"),l()(l()(".types__content")[e]).addClass("types__content_active")}}),l()(".types__button").on("click",function(e){e.preventDefault(),l()(window).width()<740&&(l()(".types__wrapper-list").hasClass("types__wrapper-list_active")?(l()(".types__wrapper-list").removeClass("types__wrapper-list_active"),l()(".types__list-tab").addClass("types__list-tab-js"),l()(".types__list-tab_active").removeClass("types__list-tab-js"),l()(".types__list-tab-js").slideUp(function(){l()(this).removeClass("types__list-tab-js").removeAttr("style")})):(l()(".types__wrapper-list").addClass("types__wrapper-list_active"),l()(".types__list-tab").slideDown()))})}},[[64,0]]]);